<div ng-controll="personal">

	<div id="personal" class="wrapper_home">

		<div id="header">
			<div class="wrap">
				<i class="menu_open" id="chu"></i>
				<div class="logo">
					<a><img src="images/logo.png" /></a>
				</div>
				<i class="search_open" id="chu1"></i>
			</div>
			<div class="logo_msk"></div>
		</div>

		<div class="personal_main">
			<div class="personal_main_left">
				<div class="personal_tou">

				</div>
				<input type="file" id="a" />

				<ul class="personal_ziliao">
					
				</ul>
				<button class="bbb">修改资料</button>
				<div class='personal_main_xiu'>
					<ul class="personal_xiu_content">
						<li><i>昵称：</i><input type="text" /></li>
						<li><i>性别：</i><input type="text" /></li>
						<li><i>电话：</i><input type="text" /></li>
						<li><i>QQ：</i><input type="text" /></li>
						<li><i>邮箱：</i><input type="text" /></li>
						<li><button class="aaa">确认修改</button></li>
					</ul>
				</div>
			</div>

			<div class="personal_main_right">
				<div class="main_right-top">
					<button class='a' ng-model="yifa" id="yifa">我已发表</button>
					<button class="b" ng-model="yicang">我已收藏</button>
				</div>
				<div class="main_right-bottom">
					<ul class="d" style="display: none;">
				        <li>我已收藏</li>
				        <li>我已收藏</li>
				        <li>我已收藏</li>
				        <li>我已收藏</li>
					</ul>
					<ul class="c">
					</ul>
				</div>
			</div>
		</div>
	</div>

	<div id="menu">
		<div class="search_wrap">
			<form action="" method="get">
				<input type="text" name="search" class="search_input" placeholder="关键字查找" ng-model="search" ng-blur="hd()" />
				<i class="reset_input"><i></i></i>
			</form>
		</div>
		<ul>
			<li class="nav_index menu_cur" id="shou">
				<a><i></i><span>首页</span><b></b>
					<div class="clear"></div>
				</a>
			</li>
			<li class="nav_site" ng-click="personal()">
				<a><i></i><span>个人</span><b></b>
					<div class="clear"></div>
				</a>
			</li>
			<li class="nav_about" id="xiao">
				<a><i></i><span>消息</span><b></b>
					<div class="clear"></div>
				</a>
			</li>
		</ul>
	</div>

</div>

<script>
        var c=false;
        $("#chu").click(function(){
        	if(c==false){
    	$(".wrapper_home").css({"left":"250px"})
    	c=true;
      }else{
    	$(".wrapper_home").css({"left":"0px"})
    	c=false;
    }	
        })
        
	function ww(el) {
				var obj = document.querySelectorAll(el);
				return obj.length > 1 ? obj : obj[0];
			}
		ww(".personal_tou").addEventListener("click",function(){
			ww("#a").click();
			ww("#a").addEventListener("change", function() {
				//第一步创建文件对象
					var img = this.files[0],
					//创建了一个文件对象
					fileTran = new FileReader();
						//将文件转换为文本显示
					fileTran.readAsDataURL(img);
					//文件加载成功后执行事件
					fileTran.onload = function() {
						ww(".personal_tou").style.cssText = "width:118;height:115"
						ww(".personal_tou").innerHTML = "<img id='img' src='" + this.result + "' style='width:100%;height:100%'/>";
						var imgWidth = ww("#img").offsetWidth,
							screenWidth= window.innerWidth,
							imgHeight = ww("#img").offsetHeight,
							screenHeight = window.innerHeight;
						if(imgWidth >= screenWidth){
							ww(".personal_tou > img").style.width = 0.8 * screenWidth +"px";
						}
						if(imgHeight >= screenHeight){
							ww(".personal_tou > img").style.height = 0.8 * screenHeight +"px";
						}

					}
				})

		})
		$('.a').click(function(){
			$('.c').css("display","block");
			$('.d').css("display","none")
		})
		$('.b').click(function(){
			$('.d').css("display","block");
			$('.c').css("display","none")
		})
		$('.bbb').click(function(){
			$('.personal_main_xiu').css("display","block")
		})
		$('.aaa').click(function(){
			$('.personal_main_xiu').css("display","none")
		})
		$.ajax({
			type: "get",
			url: "http://"+ip+"/personal/xun",
			data:"username="+localStorage.username,	
			success: function(data) {
				console.log(data)
					var html = ""
						
						for(var i = 0; i < data.length; i++) {
						html +="<li><i>昵称：</i><p>"+data[i].name+"</p></li><li><i>QQ：</i><p>"+data[i].qq+"</p></li><li><i>年龄：</i><p>"+data[i].age+"</p></li><li><i>联系方式：</i><p>"+data[i].tel+"</p></li>"
						}
						$(".personal_ziliao").append(html)
						
				
			}
		});
		
		$("#yifa").click(function(){
			$.ajax({
			type: "get",
			url:"http://"+ip+"/personal/yifa",
			data:"id="+localStorage.id,	
			success:function(data) {
				console.log(data)
				var html="";
				$(".c").html("")
				for(var i=0;i<data.length;i++){
					html+="<li>"+data[i].title+"</li>"
				}
				$(".c").append(html)
			}
		});
		})
	$("#shou").click(function(){
		location.href="#!/home"
	})
	$("#xiao").click(function(){
		location.href="#!/messages"
	})
</script>